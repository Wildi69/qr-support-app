{# app/templates/admin/base.html #}
<!doctype html>
{% set lang_code = 'fr' if request.query_params.get('lang') == 'fr' else 'en' %}
{# One translation table used by ALL admin pages #}
{% set L = {
  'en': {
    'app_title': 'QR Support App',
    'footer': '© QR Support App',
    'signin': 'Sign in',
    'email': 'Email',
    'password': 'Password',
    'button_signin': 'Sign in'
  },
  'fr': {
    'app_title': 'Support QR App',
    'footer': '© Application Support QR',
    'signin': 'Se connecter',
    'email': 'Courriel',
    'password': 'Mot de passe',
    'button_signin': 'Se connecter'
  }
} %}
{% macro tr(key) -%}{{ L[lang_code].get(key, key) }}{%- endmacro %}

<html lang="{{ 'fr' if lang_code == 'fr' else 'en' }}">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{{ tr('app_title') }}</title>
  <style>
    /* Flash messages */
    .flash { margin-bottom: 1rem; }
    .flash-item{
      padding:.9rem 1.1rem;
      border-radius:10px;
      font-weight:600;
      margin:.5rem 0;
      border:1px solid transparent;
      box-shadow:0 6px 18px rgba(0,0,0,.18);
    }
    .flash-success{ background:#103d28; color:#b7f7d3; border-color:#10b981; } /* green */
    .flash-error  { background:#3d1010; color:#fecaca; border-color:#ef4444; } /* red */
    .flash-info   { background:#0e2a3f; color:#c7e2ff; border-color:#3b82f6; }
    .flash-warning{ background:#3d2c0f; color:#fde68a; border-color:#f59e0b; }
    :root { --bg:#0f172a; --card:#111827; --ink:#e5e7eb; --muted:#9ca3af; --accent:#22d3ee; }
    *{box-sizing:border-box}
    body{margin:0;font-family:system-ui,Segoe UI,Roboto,Ubuntu,Arial,sans-serif;background:var(--bg);color:var(--ink)}
    header,footer{background:var(--card)}
    .container{max-width:1000px;margin:0 auto;padding:1rem}
    .row{display:flex;align-items:center;justify-content:space-between;gap:.75rem}
    a{color:var(--accent);text-decoration:none}
    .lang a{margin-left:.5rem}
    .card{background:var(--card);border-radius:12px;padding:2rem;margin-top:2rem;box-shadow:0 8px 24px rgba(0,0,0,.25)}
    .muted{color:var(--muted)}
    /* Shared form look */
    label{display:block;font-size:.95rem;margin:.75rem 0 .35rem}
    input[type="text"],input[type="email"],input[type="password"]{
      width:100%;padding:.9rem 1rem;border-radius:10px;border:1px solid #2a2f3a;
      background:#0c1424;color:var(--ink);outline:none;
    }
    input:focus{border-color:#3aa8ff;box-shadow:0 0 0 3px rgba(58,168,255,.2)}
    .btn{
      display:inline-block;margin-top:1rem;padding:.8rem 1.2rem;border:0;border-radius:12px;
      background:var(--accent);color:#021018;font-weight:700;cursor:pointer
    }
  </style>
  {% block page_styles %}{% endblock %}
</head>
<body>
  <header>
    <div class="container row">
      <div><strong>{{ tr('app_title') }}</strong></div>
      <div class="lang muted">
        {{ 'Langue' if lang_code == 'fr' else 'Language' }}:
        <a href="{{ request.url.path }}?lang=en">EN</a> |
        <a href="{{ request.url.path }}?lang=fr">FR</a>
      </div>
    </div>
  </header>

  <main class="container">
    {% include "admin/_flash.html" %}
    <div class="card">
      {% block content %}{% endblock %}
    </div>
  </main>

  <footer>
    <div class="container muted">{{ tr('footer') }}</div>
  </footer>
</body>
</html>
